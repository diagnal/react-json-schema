"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var _react=require("react");var _reactDomFactories=require("react-dom-factories");var _reactDomFactories2=_interopRequireDefault(_reactDomFactories);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var n={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;n[r]=e[r]}return n}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var _componentMap=new WeakMap;var ReactJsonSchema=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"parseSchema",value:function e(t,n){var r=null;var o=null;if(n!==undefined&&typeof n=="function"){t.updateComponent=n}if(Array.isArray(t)){o=this.parseSubSchemas(t,n)}else if(t){r=this.createComponent(t,n)}return r||o}},{key:"parseSubSchemas",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n=arguments[1];var r=[];var o=0;var a=true;var i=false;var c=undefined;try{for(var u=t[Symbol.iterator](),s;!(a=(s=u.next()).done);a=true){var l=s.value;l.key=typeof l.key!=="undefined"?l.key:o;r.push(this.parseSchema(l,n));o++}}catch(e){i=true;c=e}finally{try{if(!a&&u.return){u.return()}}finally{if(i){throw c}}}return r}},{key:"createComponent",value:function e(t,n){var r=t.component,o=t.children,a=t.text,i=_objectWithoutProperties(t,["component","children","text"]);var c=this.resolveComponent(t);var u=typeof a!=="undefined"?a:this.resolveComponentChildren(t,n);return(0,_react.createElement)(c,i,u)}},{key:"resolveComponent",value:function e(t){var n=this.getComponentMap();var r=null;if(t.hasOwnProperty("component")){if(t.component===Object(t.component)){r=t.component}else if(n&&n[t.component]){r=n[t.component]}else if(_reactDomFactories2.default.hasOwnProperty(t.component)){r=t.component}}else{throw new Error("ReactJsonSchema could not resolve a component due to a missing component attribute in the schema.")}return r}},{key:"resolveComponentChildren",value:function e(t,n){return t.hasOwnProperty("children")?this.parseSchema(t.children,n):undefined}},{key:"getComponentMap",value:function e(){return _componentMap.get(this)}},{key:"setComponentMap",value:function e(t){_componentMap.set(this,t)}}]);return e}();exports.default=ReactJsonSchema;